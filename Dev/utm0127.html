<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì˜¤ë”ì¦ˆ ë§ˆì¼€íŒ… ë§í¬ ê´€ë¦¬ì (Secure Flow)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap');
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #f2f5f9; }
        
        .tbl_frm th { background-color: #f5f8fc; padding: 12px 15px; text-align: left; font-weight: 500; border-bottom: 1px solid #e2e8f0; color: #333; width: 140px; }
        .tbl_frm td { padding: 12px 15px; border-bottom: 1px solid #e2e8f0; background-color: #fff; }
        
        .tbl_head th { background-color: #f1f5f9; padding: 10px; font-weight: 600; font-size: 13px; border-bottom: 1px solid #cbd5e1; color: #475569; text-align: center; }
        .tbl_head td { padding: 10px; border-bottom: 1px solid #e2e8f0; font-size: 13px; color: #334155; vertical-align: middle; }
        .tbl_head tr:hover td { background-color: #f8fafc; }

        .toggle-checkbox:checked { right: 0; border-color: #2563eb; }
        .toggle-checkbox:checked + .toggle-label { background-color: #2563eb; }
    </style>
</head>
<body class="text-slate-800">

    <!-- ìƒë‹¨ í—¤ë” -->
    <header class="bg-white border-b border-slate-200 px-8 py-4 mb-6 shadow-sm sticky top-0 z-50">
        <div class="flex justify-between items-center max-w-7xl mx-auto w-full">
            <div>
                <h1 class="text-xl font-bold text-slate-800"><i class="fas fa-link text-blue-600 mr-2"></i>ë§ˆì¼€íŒ… ë§í¬ ë¹Œë”</h1>
                <p class="text-xs text-slate-500 mt-1">ì›ë§í¬ + UTM íŒŒë¼ë¯¸í„° ì¡°í•© ë° ë‹¨ì¶• (URL Builder)</p>
            </div>
            <div class="text-right">
                <span class="text-xs bg-green-50 text-green-700 px-2 py-1 rounded border border-green-100 font-bold">Ver 8.0 (Clean)</span>
            </div>
        </div>
    </header>

    <div class="max-w-7xl mx-auto px-6 pb-20">

        <!-- ë§í¬ ë¹Œë” í¼ -->
        <section class="mb-10">
            <div class="flex items-center gap-2 mb-3 border-l-4 border-blue-600 pl-3">
                <h2 class="text-base font-bold text-slate-700">ì‹ ê·œ ìº í˜ì¸ ë§í¬ ìƒì„±</h2>
            </div>
            
            <div class="bg-white border border-slate-300 rounded-sm shadow-sm overflow-hidden">
                <table class="w-full text-sm tbl_frm">
                    <tbody>
                        <!-- STEP 1: ì›ë§í¬ (Original Link) -->
                        <tr class="border-b-2 border-slate-100">
                            <th class="bg-blue-50/50">
                                <span class="bg-blue-600 text-white w-5 h-5 inline-flex items-center justify-center rounded-full text-[10px] mr-1">1</span>
                                ì›ë§í¬ (Target) <span class="text-red-500">*</span>
                            </th>
                            <td colspan="3">
                                <div class="flex flex-col gap-1">
                                    <input type="text" id="inputBaseUrl" 
                                        class="w-full border border-blue-300 px-3 py-2.5 rounded text-slate-700 focus:border-blue-500 outline-none shadow-sm font-medium" 
                                        placeholder="https://orderz.kr/member/join.php (ê³ ê°ì´ ì²˜ìŒ ë„ì°©í•  í˜ì´ì§€)"
                                        oninput="updatePreview()">
                                    <p class="text-[10px] text-slate-400">* ì´ ì£¼ì†Œ ë’¤ì— UTM ë° ë¦¬ë‹¤ì´ë ‰íŠ¸ íŒŒë¼ë¯¸í„°ê°€ ìë™ìœ¼ë¡œ ë¶™ìŠµë‹ˆë‹¤.</p>
                                </div>
                            </td>
                        </tr>

                        <!-- STEP 2: UTM ì„¤ì • -->
                        <tr>
                            <th>
                                <span class="bg-slate-500 text-white w-5 h-5 inline-flex items-center justify-center rounded-full text-[10px] mr-1">2</span>
                                ì¶”ì  ì„¤ì • (UTM)
                            </th>
                            <td colspan="3">
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <!-- ìº í˜ì¸ ë©”ëª¨ -->
                                    <div>
                                        <label class="block text-xs font-bold text-blue-800 mb-1">ìº í˜ì¸ ë©”ëª¨ (Memo) <span class="text-red-500">*</span></label>
                                        <input type="text" id="inputMemo" class="w-full border border-blue-200 bg-blue-50 px-2 py-2 rounded focus:border-blue-500 outline-none text-xs font-bold" 
                                            placeholder="ì˜ˆ: ì—¬ë¦„ ì •ê¸° ì„¸ì¼" oninput="updatePreview()">
                                    </div>
                                    <!-- ìœ ì… ì±„ë„ -->
                                    <div>
                                        <label class="block text-xs font-bold text-slate-600 mb-1">ìœ ì… ì±„ë„ (Channel)</label>
                                        <select id="inputSrc" class="w-full border border-slate-300 px-2 py-2 rounded focus:border-blue-500 outline-none text-xs" onchange="updatePreview()">
                                            <option value="referral" data-source="homepage" data-medium="referral">ê¸°ë³¸ (ì›¹ì‚¬ì´íŠ¸/ë¸”ë¡œê·¸)</option>
                                            <optgroup label="ê´‘ê³  (Paid)">
                                                <option value="paid_search" data-source="naver" data-medium="cpc">Paid Search (ë„¤ì´ë²„ íŒŒì›Œë§í¬)</option>
                                                <option value="paid_social" data-source="instagram" data-medium="paidsocial">Paid Social (ì¸ìŠ¤íƒ€/í˜ë¶ ê´‘ê³ )</option>
                                                <option value="display" data-source="gdn" data-medium="display">Display (ë°°ë„ˆ ê´‘ê³ )</option>
                                            </optgroup>
                                            <optgroup label="ë©”ì‹œì§€/CRM">
                                                <option value="messaging" data-source="kakao" data-medium="talk">Messaging (ì•Œë¦¼í†¡/ë¬¸ì)</option>
                                                <option value="email" data-source="crm" data-medium="email">Email (ë‰´ìŠ¤ë ˆí„°)</option>
                                            </optgroup>
                                            <optgroup label="ì˜¤í”„ë¼ì¸/ê¸°íƒ€">
                                                <option value="internal" data-source="sales" data-medium="qr">Internal (QR/ì˜ì—…ì‚¬ì›)</option>
                                                <option value="affiliates" data-source="partner" data-medium="affiliate">Affiliates (ì œíœ´ì‚¬)</option>
                                            </optgroup>
                                        </select>
                                    </div>
                                    <!-- ìœ í†µì‚¬ ì½”ë“œ -->
                                    <div>
                                        <label class="block text-xs font-bold text-slate-600 mb-1">ìœ í†µì‚¬ ì½”ë“œ (yt_code)</label>
                                        <input type="text" id="inputYt" class="w-full border border-slate-300 px-2 py-2 rounded focus:border-blue-500 outline-none text-xs" 
                                            placeholder="ì˜ˆ: ABC001 (ì„ íƒ)" oninput="updatePreview()">
                                    </div>
                                </div>
                            </td>
                        </tr>

                        <!-- í”„ë¦¬ë·° (Real-time Builder) -->
                        <tr class="bg-slate-50 border-t border-b border-slate-200">
                            <th class="text-center align-middle bg-slate-100">
                                <span class="text-[10px] bg-slate-600 text-white px-2 py-1 rounded font-bold">PREVIEW</span>
                            </th>
                            <td colspan="3" class="p-4">
                                <div class="flex flex-col gap-1">
                                    <span class="text-xs text-slate-500 font-bold">ğŸ”» ìë™ ìƒì„±ëœ í’€ ì£¼ì†Œ (Full URL)</span>
                                    <div id="previewUrl" class="font-mono text-xs text-blue-600 break-all bg-white border border-blue-100 p-3 rounded select-all shadow-sm">
                                        https://orderz.kr/member/join.php?utm_source=homepage&utm_medium=referral
                                    </div>
                                </div>
                            </td>
                        </tr>

                        <!-- STEP 3: ë‹¨ì¶• ì½”ë“œ -->
                        <tr>
                            <th>
                                <span class="bg-slate-700 text-white w-5 h-5 inline-flex items-center justify-center rounded-full text-[10px] mr-1">3</span>
                                ë‹¨ì¶• ì½”ë“œ <span class="text-red-500">*</span>
                            </th>
                            <td colspan="3">
                                <div class="flex items-center gap-2">
                                    <span class="text-slate-500 font-mono font-bold">orderz.kr/l/</span>
                                    <input type="text" id="inputCode" placeholder="ì˜ˆ: sale2024" 
                                        class="border border-slate-300 px-3 py-2 rounded w-48 focus:border-blue-500 outline-none font-bold text-slate-800">
                                    <span class="text-[11px] text-slate-400 hidden md:inline">* ì˜ë¬¸ ì†Œë¬¸ì, ìˆ«ì, í•˜ì´í”ˆ(-), ì–¸ë”ë°”(_)ë§Œ ì‚¬ìš© ê°€ëŠ¥</span>
                                </div>
                            </td>
                        </tr>

                        <!-- STEP 4: ê°€ì… í›„ ë¦¬ë‹¤ì´ë ‰íŠ¸ (ì„ íƒì‚¬í•­) -->
                        <tr class="border-t-4 border-slate-100">
                            <th class="align-top pt-4">
                                <span class="bg-slate-400 text-white w-5 h-5 inline-flex items-center justify-center rounded-full text-[10px] mr-1">4</span>
                                íšŒì›ê°€ì…/ë¡œê·¸ì¸ í›„<br>ì´ë™ ê²½ë¡œ <span class="text-[10px] font-normal text-slate-400 block mt-1">(Advanced / Optional)</span>
                            </th>
                            <td colspan="3" class="pt-4 pb-4">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <!-- ì‹ ê·œ íšŒì› ê°€ì… í›„ -->
                                    <div class="space-y-1">
                                        <label class="block text-xs font-bold text-slate-700">
                                            <i class="fas fa-arrow-right mr-1 text-blue-500"></i>ì‹ ê·œ ê°€ì… ì™„ë£Œ í›„ (Next URL)
                                        </label>
                                        <input type="text" id="inputNext" 
                                            class="w-full border border-slate-300 px-3 py-2 rounded text-slate-600 focus:border-slate-500 outline-none text-xs bg-slate-50 focus:bg-white transition" 
                                            placeholder="ì˜ˆ: /event/coupon.php (ë‚´ë¶€ ìƒëŒ€ê²½ë¡œë§Œ í—ˆìš©)"
                                            oninput="updatePreview()">
                                    </div>

                                    <!-- ê¸°ì¡´ íšŒì›/ì¤‘ë³µ -->
                                    <div class="space-y-1">
                                        <label class="block text-xs font-bold text-slate-600">
                                            <i class="fas fa-history mr-1 text-orange-500"></i>ê¸°ì¡´ íšŒì›/ì¤‘ë³µ ì ‘ì† ì‹œ (Fallback URL)
                                        </label>
                                        <input type="text" id="inputNextExist" 
                                            class="w-full border border-slate-300 px-3 py-2 rounded text-slate-600 focus:border-slate-500 outline-none text-xs bg-slate-50 focus:bg-white transition" 
                                            placeholder="ì˜ˆ: /index.php (ë¡œê·¸ì¸ í˜ì´ì§€)"
                                            oninput="updatePreview()">
                                    </div>
                                </div>
                                <p class="text-[10px] text-red-500 mt-2 font-bold">
                                    <i class="fas fa-shield-alt"></i> ë³´ì•ˆ ì£¼ì˜: ì™¸ë¶€ ë„ë©”ì¸(https://...) ì…ë ¥ ì‹œ ì €ì¥ì´ ì°¨ë‹¨ë©ë‹ˆë‹¤. ë°˜ë“œì‹œ '/'ë¡œ ì‹œì‘í•˜ëŠ” ë‚´ë¶€ ê²½ë¡œë§Œ ì…ë ¥í•˜ì„¸ìš”.
                                </p>
                            </td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="bg-slate-800 p-4 text-center">
                    <button onclick="createLink()" class="bg-blue-600 text-white px-10 py-3 rounded hover:bg-blue-500 transition shadow-lg text-sm font-bold flex items-center justify-center mx-auto gap-2">
                        <i class="fas fa-magic"></i> ë‹¨ì¶• ë§í¬ ìƒì„±í•˜ê¸°
                    </button>
                </div>
            </div>
        </section>

        <!-- ê´€ë¦¬ ëª©ë¡ -->
        <section>
            <div class="flex justify-between items-end mb-3">
                <h2 class="text-base font-bold text-slate-700 border-l-4 border-slate-600 pl-3">ìƒì„± ëª©ë¡ <span id="totalCount" class="text-xs font-normal text-slate-500 ml-1">(0ê°œ)</span></h2>
                <div class="flex gap-2">
                    <input type="text" id="searchInput" placeholder="ìº í˜ì¸, ì½”ë“œ ê²€ìƒ‰" class="border border-slate-300 px-2 py-1 text-sm rounded w-56 outline-none focus:border-blue-500" onkeyup="filterList()">
                </div>
            </div>

            <div class="bg-white border-t-2 border-slate-600 shadow-sm overflow-x-auto">
                <table class="w-full text-left tbl_head">
                    <thead>
                        <tr>
                            <th class="w-14">ìƒíƒœ</th>
                            <th class="w-64 text-left pl-4">ìº í˜ì¸ / ì½”ë“œ</th>
                            <th class="text-left pl-4">ì—°ê²°ëœ ì›ë³¸ ì£¼ì†Œ (ê¸´ê¸‰ ìˆ˜ì • ê°€ëŠ¥)</th>
                            <th class="w-24">ìœ ì…</th>
                            <th class="w-32">ì±„ë„</th>
                            <th class="w-16">ì‚­ì œ</th>
                        </tr>
                    </thead>
                    <tbody id="linkListBody">
                        <!-- JS ë Œë”ë§ -->
                    </tbody>
                </table>
            </div>
        </section>

    </div>

    <script>
        // ì´ˆê¸° ë°ì´í„° (Mock)
        let linkData = [
            { 
                id: 1, 
                code: "summer_event", 
                full_url: "https://orderz.kr/member/join.php?utm_source=instagram&utm_medium=paidsocial&next=/event/summer.php",
                base_url: "https://orderz.kr/member/join.php",
                memo: "ì—¬ë¦„ ê°€ì… ì´ë²¤íŠ¸ (ì¸ìŠ¤íƒ€)", 
                active: true, 
                hits: 1520, 
                channel: "paid_social",
                created_at: "2023-11-01" 
            },
            { 
                id: 2, 
                code: "main_home", 
                full_url: "https://orderz.kr/?utm_source=homepage&utm_medium=referral",
                base_url: "https://orderz.kr/",
                memo: "ë©”ì¸ í™ˆí˜ì´ì§€ (ê¸°ë³¸)", 
                active: true, 
                hits: 3400, 
                channel: "referral",
                created_at: "2023-10-20" 
            }
        ];

        const DOM = {
            inputBaseUrl: document.getElementById('inputBaseUrl'),
            inputSrc: document.getElementById('inputSrc'),
            inputMemo: document.getElementById('inputMemo'),
            inputYt: document.getElementById('inputYt'),
            inputCode: document.getElementById('inputCode'),
            inputNext: document.getElementById('inputNext'),
            inputNextExist: document.getElementById('inputNextExist'),
            previewUrl: document.getElementById('previewUrl'),
            listBody: document.getElementById('linkListBody'),
            totalCount: document.getElementById('totalCount')
        };

        // 1. ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸° (URL Builder)
        function updatePreview() {
            const baseUrl = DOM.inputBaseUrl.value.trim() || 'https://orderz.kr/member/join.php';
            const selectedOption = DOM.inputSrc.options[DOM.inputSrc.selectedIndex];
            
            let params = [];
            
            // 1. UTM
            if (selectedOption.dataset.source) params.push(`utm_source=${selectedOption.dataset.source}`);
            if (selectedOption.dataset.medium) params.push(`utm_medium=${selectedOption.dataset.medium}`);
            const campaign = DOM.inputMemo.value.trim();
            if (campaign) params.push(`utm_campaign=${encodeURIComponent(campaign)}`);
            const ytCode = DOM.inputYt.value.trim();
            if (ytCode) params.push(`yt_code=${encodeURIComponent(ytCode)}`);

            // 2. Redirect Parameters (Optional)
            const next = DOM.inputNext.value.trim();
            if (next) params.push(`next=${encodeURIComponent(next)}`);
            
            const nextExist = DOM.inputNextExist.value.trim();
            if (nextExist) params.push(`next_exist=${encodeURIComponent(nextExist)}`);

            // Combine
            const separator = baseUrl.includes('?') ? '&' : '?';
            const finalUrl = params.length > 0 ? `${baseUrl}${separator}${params.join('&')}` : baseUrl;
            
            DOM.previewUrl.textContent = finalUrl;
            return finalUrl;
        }

        // 2. ë¦¬ìŠ¤íŠ¸ ë Œë”ë§
        function renderList(data = linkData) {
            DOM.listBody.innerHTML = "";
            DOM.totalCount.textContent = `(${data.length}ê°œ)`;

            if (data.length === 0) {
                DOM.listBody.innerHTML = `<tr><td colspan="6" class="text-center py-10 text-slate-400">ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</td></tr>`;
                return;
            }

            data.forEach(item => {
                const tr = document.createElement('tr');
                tr.className = item.active ? 'hover:bg-slate-50 transition' : 'bg-slate-50 opacity-60';

                const channelColors = {
                    'paid_search': 'bg-blue-100 text-blue-800',
                    'paid_social': 'bg-indigo-100 text-indigo-800',
                    'referral': 'bg-slate-100 text-slate-700',
                    'messaging': 'bg-green-100 text-green-800'
                };
                const badgeColor = channelColors[item.channel] || 'bg-gray-100 text-gray-600';

                tr.innerHTML = `
                    <td class="text-center align-middle">
                        <input type="checkbox" ${item.active ? 'checked' : ''} class="toggle-checkbox w-4 h-4" onchange="toggleActive(${item.id})">
                    </td>
                    <td class="pl-4 py-3 align-top">
                        <div class="text-sm font-bold text-slate-800 mb-1 truncate w-60" title="${item.memo}">
                            ${item.memo || '<span class="text-slate-300">ë©”ëª¨ ì—†ìŒ</span>'}
                        </div>
                        <div class="flex items-center gap-2 text-xs text-slate-500 font-mono group cursor-pointer hover:text-blue-600" onclick="copyCode('${item.code}')">
                            <span>/l/${item.code}</span>
                            <i class="far fa-copy text-slate-300 group-hover:text-blue-500"></i>
                        </div>
                    </td>
                    <td class="pl-4 py-2 align-middle">
                        <div class="relative group w-full">
                            <input type="text" id="url-${item.id}" value="${item.full_url}" 
                                class="w-full text-xs border border-transparent hover:border-slate-300 focus:border-blue-500 focus:bg-white bg-transparent rounded px-2 py-1.5 outline-none text-slate-500 transition-colors font-mono truncate focus:truncate-0"
                                onkeydown="if(event.key === 'Enter') updateLink(${item.id})">
                            <button onclick="updateLink(${item.id})" class="absolute right-2 top-1.5 text-blue-600 opacity-0 group-hover:opacity-100 transition text-xs hover:bg-blue-50 px-2 rounded font-bold bg-white shadow-sm border border-slate-200">
                                ì €ì¥
                            </button>
                        </div>
                    </td>
                    <td class="text-center text-sm font-mono text-slate-600 align-middle">
                        ${item.hits.toLocaleString()}
                    </td>
                    <td class="pl-4 align-middle">
                        <span class="px-2 py-1 rounded text-[10px] font-bold uppercase ${badgeColor}">${item.channel}</span>
                    </td>
                    <td class="text-center align-middle">
                        <button onclick="deleteLink(${item.id})" class="text-slate-300 hover:text-red-500 p-2"><i class="fas fa-trash-alt"></i></button>
                    </td>
                `;
                DOM.listBody.prepend(tr);
            });
        }

        // 3. ë§í¬ ìƒì„±
        function createLink() {
            const baseUrl = DOM.inputBaseUrl.value.trim();
            const code = DOM.inputCode.value.trim();
            const memo = DOM.inputMemo.value.trim();
            const fullUrl = DOM.previewUrl.textContent.trim();
            const next = DOM.inputNext.value.trim();
            const nextExist = DOM.inputNextExist.value.trim();

            if (!baseUrl) return alert("ì›ë§í¬(Target)ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            if (!memo) return alert("ìº í˜ì¸ ë©”ëª¨ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            if (!code) return alert("ë‹¨ì¶• ì½”ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            
            // ë³´ì•ˆ ê²€ì¦: next ê°’ì€ ë°˜ë“œì‹œ /ë¡œ ì‹œì‘í•´ì•¼ í•¨ (ì™¸ë¶€ ë„ë©”ì¸ ì°¨ë‹¨)
            if (next && !next.startsWith('/')) {
                alert("ë³´ì•ˆì„ ìœ„í•´ [ì‹ ê·œ ê°€ì… ì™„ë£Œ í›„ ì´ë™ ê²½ë¡œ]ëŠ”\në°˜ë“œì‹œ '/'ë¡œ ì‹œì‘í•˜ëŠ” ë‚´ë¶€ ê²½ë¡œë§Œ í—ˆìš©ë©ë‹ˆë‹¤.\n(ì™¸ë¶€ ë„ë©”ì¸ ë¶ˆê°€, http/https ë¶ˆê°€)");
                DOM.inputNext.focus();
                return;
            }
            if (nextExist && !nextExist.startsWith('/')) {
                alert("ë³´ì•ˆì„ ìœ„í•´ [ê¸°ì¡´ íšŒì› ì´ë™ ê²½ë¡œ]ëŠ”\në°˜ë“œì‹œ '/'ë¡œ ì‹œì‘í•˜ëŠ” ë‚´ë¶€ ê²½ë¡œë§Œ í—ˆìš©ë©ë‹ˆë‹¤.");
                DOM.inputNextExist.focus();
                return;
            }

            if (linkData.some(l => l.code === code)) return alert("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì½”ë“œì…ë‹ˆë‹¤.");

            const newLink = {
                id: Date.now(),
                code: code,
                full_url: fullUrl,
                base_url: baseUrl,
                memo: memo,
                active: true,
                hits: 0,
                channel: DOM.inputSrc.value,
                created_at: new Date().toISOString().split('T')[0]
            };

            linkData.push(newLink);
            renderList();
            
            // ì´ˆê¸°í™”
            DOM.inputCode.value = "";
            DOM.inputMemo.value = "";
            alert(`[${memo}] ë§í¬ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.`);
        }

        // 4. ë§í¬ ìˆ˜ì •
        function updateLink(id) {
            const inputEl = document.getElementById(`url-${id}`);
            const newUrl = inputEl.value.trim();
            const item = linkData.find(l => l.id === id);

            if (!newUrl) return alert("URLì„ ë¹„ì›Œë‘˜ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
            if (item.full_url === newUrl) return;

            if (confirm(`ğŸš¨ ì£¼ì˜: ì›ë³¸ ì£¼ì†Œë¥¼ ë³€ê²½í•˜ë©´ ë°°í¬ëœ ë§í¬ì˜ ë„ì°©ì§€ê°€ ì¦‰ì‹œ ë°”ë€ë‹ˆë‹¤.\n\nì •ë§ ìˆ˜ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                item.full_url = newUrl;
                inputEl.classList.add('bg-green-50', 'text-green-700');
                setTimeout(() => inputEl.classList.remove('bg-green-50', 'text-green-700'), 1000);
            } else {
                inputEl.value = item.full_url;
            }
        }

        // ì‚­ì œ
        function deleteLink(id) {
            if (confirm("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
                linkData = linkData.filter(l => l.id !== id);
                renderList();
            }
        }
        
        // ê²€ìƒ‰
        function filterList() {
            const keyword = document.getElementById('searchInput').value.toLowerCase();
            const filtered = linkData.filter(l => 
                l.code.toLowerCase().includes(keyword) || 
                l.memo.toLowerCase().includes(keyword)
            );
            renderList(filtered);
        }

        // ë³µì‚¬
        function copyCode(code) {
            navigator.clipboard.writeText(`https://orderz.kr/l/${code}`);
            alert("ë‹¨ì¶• ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
        }

        // í† ê¸€
        function toggleActive(id) {
            const item = linkData.find(l => l.id === id);
            if(item) item.active = !item.active;
        }

        // ì´ˆê¸° ì‹¤í–‰
        updatePreview();
        renderList();

    </script>
</body>
</html>
